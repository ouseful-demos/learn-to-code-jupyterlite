

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>1 Enter the pandas &#8212; Learn to code for data analysis</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=365ca57ee442770a23c6" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=365ca57ee442770a23c6" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=365ca57ee442770a23c6" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=365ca57ee442770a23c6" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=365ca57ee442770a23c6" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=365ca57ee442770a23c6" />
  <script src="_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=365ca57ee442770a23c6"></script>

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'md_out_01_01';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="2 Writing up the analysis" href="md_out_01_02.html" />
    <link rel="prev" title="3 Summary" href="md_out_00_03.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
  
    <p class="title logo__title">Learn to code for data analysis</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="index.html">
                    Learn to code for data analysis
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Week 1: Having a go at it Part 1</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="md_out_00_01.html">1 Install the software</a></li>
<li class="toctree-l1"><a class="reference internal" href="md_out_00_02.html">2 This week’s quiz</a></li>
<li class="toctree-l1"><a class="reference internal" href="md_out_00_03.html">3 Summary</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Week 2: Having a go at it Part 2</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">1 Enter the pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="md_out_01_02.html">2 Writing up the analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="md_out_01_03.html">3 This week’s quiz</a></li>
<li class="toctree-l1"><a class="reference internal" href="md_out_01_04.html">4 Summary</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Week 3: Cleaning up our act Part 1</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="md_out_02_01.html">1 Weather data</a></li>
<li class="toctree-l1"><a class="reference internal" href="md_out_02_02.html">3 This week’s quiz</a></li>
<li class="toctree-l1"><a class="reference internal" href="md_out_02_03.html">4 Summary</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Week 4: Cleaning up our act Part 2</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="md_out_03_01.html">1 Loading the weather data</a></li>
<li class="toctree-l1"><a class="reference internal" href="md_out_03_02.html">2 Every picture tells a story</a></li>
<li class="toctree-l1"><a class="reference internal" href="md_out_03_03.html">3 This week’s quiz</a></li>
<li class="toctree-l1"><a class="reference internal" href="md_out_03_04.html">4 Summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="md_out_03_05.html">4.1 Week 4 glossary</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Week 4: Cleaning up our act Part 2</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="md_out_04_01.html">1 Loading the weather data</a></li>
<li class="toctree-l1"><a class="reference internal" href="md_out_04_02.html">2 Every picture tells a story</a></li>
<li class="toctree-l1"><a class="reference internal" href="md_out_04_03.html">3 This week’s quiz</a></li>
<li class="toctree-l1"><a class="reference internal" href="md_out_04_04.html">4 Summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="md_out_04_05.html">4.1 Week 4 glossary</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Week 5: Combine and transform data Part 1</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="md_out_05_01.html">1 Life expectancy project</a></li>
<li class="toctree-l1"><a class="reference internal" href="md_out_05_02.html">2 This week’s quiz</a></li>
<li class="toctree-l1"><a class="reference internal" href="md_out_05_03.html">3 Summary</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Week 6: Combine and transform data Part 2</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="md_out_06_01.html">1 Joining left, right and centre</a></li>
<li class="toctree-l1"><a class="reference internal" href="md_out_06_02.html">2 Correlation</a></li>
<li class="toctree-l1"><a class="reference internal" href="md_out_06_03.html">3 This week’s quiz</a></li>
<li class="toctree-l1"><a class="reference internal" href="md_out_06_04.html">4 Summary</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Week 7: Further techniques Part 1</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="md_out_07_01.html">1 I spy with my little eye</a></li>
<li class="toctree-l1"><a class="reference internal" href="md_out_07_02.html">2 This week’s quiz</a></li>
<li class="toctree-l1"><a class="reference internal" href="md_out_07_03.html">3 Summary</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Week 8: Further techniques Part 2</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="md_out_08_01.html">1 The split-apply-combine pattern</a></li>
<li class="toctree-l1"><a class="reference internal" href="md_out_08_02.html">2 Pivot tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="md_out_08_03.html">3 This week’s quiz</a></li>
<li class="toctree-l1"><a class="reference internal" href="md_out_08_04.html">4 Summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="md_out_08_05.html">Tell us what you think</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">


<a href="https://github.com/ouseful-demos/learn-to-code-jupyterlite" target="_blank"
   class="btn btn-sm btn-source-repository-button"
   title="Source repository"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/md_out_01_01.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>1 Enter the pandas</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#this-weeks-data">1.1 This week’s data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#loading-the-data">1.2 Loading the data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#selecting-a-column">1.3 Selecting a column</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculations-on-a-column">1.4 Calculations on a column</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sorting-on-a-column">1.5 Sorting on a column</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculations-over-columns">1.6 Calculations over columns</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="enter-the-pandas">
<h1>1 Enter the pandas<a class="headerlink" href="#enter-the-pandas" title="Permalink to this heading">#</a></h1>
<p>As you probably realised, this way of coding is not practical for large scale data analysis.</p>
<p><img alt="An image of four giant panda cubs climbing a bamboo fence" src="ou_futurelearn_learn_to_code_fig_1034.jpg" /></p>
<p><strong>Figure 1</strong></p>
<p>Three lines of code were required for each country, to store the number of deaths, store the population, and calculate the death rate. With roughly 200 countries in the world, my trivial analysis would require 400 variables and typing almost 600 lines of code! Life’s too short to be spent that way.</p>
<p>Instead of using a separate variable for each datum, it is better to organise data as a table of rows and columns.</p>
<table xmlns:str="http://exslt.org/strings">
<caption>Table 1</caption>
<tbody>
<tr>
<th>Country</th>
<th>Deaths</th>
<th>Population</th>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">Angola</td>
<td class="highlight_" rowspan="" colspan="">6900</td>
<td class="highlight_" rowspan="" colspan="">21472</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">Brazil</td>
<td class="highlight_" rowspan="" colspan="">4400</td>
<td class="highlight_" rowspan="" colspan="">200362</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">Portugal</td>
<td class="highlight_" rowspan="" colspan="">140</td>
<td class="highlight_" rowspan="" colspan="">10608</td>
</tr>
</tbody>
</table>
<p>In that way, instead of 400 variables, I only need one that stores the whole table. Instead of writing a mile long expression that adds 200 variables to obtain the total deaths, I’ll write a short expression that calculates the total of the ‘Deaths’ column, no matter how many countries (rows) there are.</p>
<p>To organise data into tables and do calculations on such tables, you and I will use the pandas module, which is included in Anaconda and CoCalc. A <strong>module</strong> is a package of various pieces of code that can be used individually. The pandas module provides very extensive and advanced data analysis capabilities to compliment Python. This course only scratches the surface of pandas.</p>
<p>I have to tell the computer that I’m going to use a module.</p>
<p><code class="docutils literal notranslate"><span class="pre">In</span> <span class="pre">[]:</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
<span class="kn">from</span> <span class="nn">pandas</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
<p>That line of code is an <strong>import</strong> statement: from the pandas module, import everything. In plain English: load into memory all pieces of code that are in the pandas module, so that I can use any of them. In the above statement, the asterisk isn’t the multiplication operator but instead means ‘everything’.</p>
<p>Each weekly project in this course will start with this import statement, because all projects need the pandas module.</p>
<p>The words <strong><code class="docutils literal notranslate"><span class="pre">from</span></code></strong> and <strong><code class="docutils literal notranslate"><span class="pre">import</span></code></strong> are <strong>reserved words</strong> : they can’t be used as variable, function or module names. Otherwise you will get a syntax error.</p>
<p><code class="docutils literal notranslate"><span class="pre">In</span> <span class="pre">[]:</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
<span class="kn">from</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">File</span> <span class="s2">&quot;&lt;ipython-input-23-6958f0ebc10d&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span>
<span class="kn">from</span> <span class="o">=</span> <span class="mi">100</span>
<span class="o">^</span>
<span class="ne">SyntaxError</span><span class="p">:</span> <span class="n">invalid</span> <span class="n">syntax</span>
</pre></div>
</div>
<!-- #region tags=["test-tag"] -->
<p>Jupyter notebooks show reserved words in boldface font to make them easier to spot. If you see a boldface name in an assignment (as you will for the code above), you must choose a different name.</p>
<div class="admonition-activity-region-tags-style-activity admonition">
<p class="admonition-title">Activity<!-- #region tags=["style-activity"] --></p>
<p class="rubric">Exercise 5 pandas</p>
<p class="rubric">Question</p>
<p>Use Exercise 5 the Exercise notebook 1 to help you answer these questions about errors you might come across.</p>
<p><strong>1. What kind of error will you get if you misspell ‘pandas’ as ‘Pandas’?</strong></p>
<p>A syntax error</p>
<p>Remember that after the reserved word ‘from’ comes a module name.</p>
<p>Take a look at The art of naming .</p>
<p>A name error, reported as an import error</p>
<p>The computer is expecting a name but there is no module with the name ‘Pandas’ in the Anaconda distribution. Remember that names are case-sensitive.</p>
<p class="rubric">Question</p>
<p><strong>2. What kind of error will you get if you misspell ‘import’ as ‘impart’?</strong></p>
<p>A name error</p>
<p>A name error only occurs when a name is undefined, but import is not a name, it’s a reserved word.</p>
<p>A syntax error</p>
<p>The computer is expecting a reserved word and anything else will raise a syntax error.</p>
<p class="rubric">Question</p>
<p><strong>3. What kind of error will you get if you forget the asterisk?</strong></p>
<p>A name error</p>
<p>An asterisk is not a name so the reported error can’t be this one.</p>
<p>A syntax error</p>
<p>The statement cannot end with the reserved word ‘import’; the computer is expecting an indication of what to import.</p>
<!-- #endregion -->
</div>
<!-- #endregion -->
<section id="this-weeks-data">
<h2>1.1 This week’s data<a class="headerlink" href="#this-weeks-data" title="Permalink to this heading">#</a></h2>
<p>For the next part of the course you’ll need to download a file of data.</p>
<p><img alt="An image with a young boy wearing a medical mask, in the foreground; a patient in a South African tuberculosis clinic" src="ou_futurelearn_learn_to_code_fig_1026.jpg" /></p>
<p><strong>Figure 2</strong></p>
<p>I have created a table with all the data necessary for the project and saved it in an Excel file. Excel is a popular application to create, edit and analyse tabular data. You won’t need Excel to complete this course, but many datasets are provided as Excel files.</p>
<p>Open the data file WHO POP TB some.xls . The file is encoded using UTF-8, a character encoding that allows for accented letters. Do <strong>not</strong> open or edit the file, as you may change how it is encoded, which will lead to errors later on. If you do want to look at its contents, make a copy of the file and look at the copy.</p>
<p>Put the data file in the same folder (or CoCalc project) where you saved your exercise notebook. Done? Great, let’s proceed to loading the data – you’ll learn how to do this in the next section.</p>
</section>
<section id="loading-the-data">
<h2>1.2 Loading the data<a class="headerlink" href="#loading-the-data" title="Permalink to this heading">#</a></h2>
<p>Many applications can read files in Excel format, and pandas can too. Asking the computer to read the data looks like this:</p>
<p><code class="docutils literal notranslate"><span class="pre">In</span> <span class="pre">[]:</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
<span class="n">data</span> <span class="o">=</span> <span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;WHO POP TB some.xls&#39;</span><span class="p">)</span>
<span class="n">data</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Out[]:</span></code></p>
<table xmlns:str="http://exslt.org/strings">
<caption></caption>
<tbody>
<tr>
<th></th>
<th>Country</th>
<th>Population (1000s)</th>
<th>TB deaths</th>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">0</td>
<td class="highlight_" rowspan="" colspan="">Angola</td>
<td class="highlight_" rowspan="" colspan="">21472</td>
<td class="highlight_" rowspan="" colspan="">6900</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">1</td>
<td class="highlight_" rowspan="" colspan="">Brazil</td>
<td class="highlight_" rowspan="" colspan="">200362</td>
<td class="highlight_" rowspan="" colspan="">4400</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">2</td>
<td class="highlight_" rowspan="" colspan="">China</td>
<td class="highlight_" rowspan="" colspan="">1393337</td>
<td class="highlight_" rowspan="" colspan="">41000</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">3</td>
<td class="highlight_" rowspan="" colspan="">Equatorial Guinea</td>
<td class="highlight_" rowspan="" colspan="">757</td>
<td class="highlight_" rowspan="" colspan="">67</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">4</td>
<td class="highlight_" rowspan="" colspan="">Guinea-Bissau</td>
<td class="highlight_" rowspan="" colspan="">1704</td>
<td class="highlight_" rowspan="" colspan="">1200</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">5</td>
<td class="highlight_" rowspan="" colspan="">India</td>
<td class="highlight_" rowspan="" colspan="">1252140</td>
<td class="highlight_" rowspan="" colspan="">240000</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">6</td>
<td class="highlight_" rowspan="" colspan="">Mozambique</td>
<td class="highlight_" rowspan="" colspan="">25834</td>
<td class="highlight_" rowspan="" colspan="">18000</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">7</td>
<td class="highlight_" rowspan="" colspan="">Portugal</td>
<td class="highlight_" rowspan="" colspan="">10608</td>
<td class="highlight_" rowspan="" colspan="">140</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">8</td>
<td class="highlight_" rowspan="" colspan="">Russian Federation</td>
<td class="highlight_" rowspan="" colspan="">142834</td>
<td class="highlight_" rowspan="" colspan="">17000</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">9</td>
<td class="highlight_" rowspan="" colspan="">Sao Tome and Principe</td>
<td class="highlight_" rowspan="" colspan="">193</td>
<td class="highlight_" rowspan="" colspan="">18</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">10</td>
<td class="highlight_" rowspan="" colspan="">South Africa</td>
<td class="highlight_" rowspan="" colspan="">52776</td>
<td class="highlight_" rowspan="" colspan="">25000</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">11</td>
<td class="highlight_" rowspan="" colspan="">Timor-Leste</td>
<td class="highlight_" rowspan="" colspan="">1133</td>
<td class="highlight_" rowspan="" colspan="">990</td>
</tr>
</tbody>
</table>
<p>The variable name data is not descriptive, but as there is only one dataset in our analysis, there is no possible confusion with other data, and short names help to keep the lines of code short.</p>
<p>The function <code class="docutils literal notranslate"><span class="pre">read_excel()</span></code> takes a file name as an argument and returns the table contained in the file. In pandas, tables are called <strong>dataframes</strong> . To load the <code class="docutils literal notranslate"><span class="pre">data</span></code>, I simply call the function and store the returned dataframe in a variable.</p>
<p>A file name must be given as a <strong>string</strong> , a piece of text surrounded by quotes. The quote marks tell Python that this isn’t a variable, function or module name. Also, the quote marks state that this is a single name, even if it contains spaces, punctuation and other characters besides letters.</p>
<p>Misspelling the file name, or not having the file in the same folder as the notebook containing the code, results in a <strong>file not found</strong> error. In the example below there is an error in the file name.</p>
<p><code class="docutils literal notranslate"><span class="pre">In</span> <span class="pre">[]:</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
data = read_excel(&#39;WHO POP TB same.xls&#39;)
data


---------------------------------------------

FileNotFoundError Traceback (most recent call last)

&lt;ipython-input-25-c017b2500afa&gt; in &lt;module&gt;()
----&gt; 1 data = read_excel(‘WHO POP TB same.xls’)
2 data



/Users/mw4687/anaconda/lib/python3.4/site-packages/pandas/io/excel.py in read_excel(io, sheetname, **kwds)

130 engine = kwds.pop(‘engine’, None)
131

--&gt; 132 return ExcelFile(io, engine=engine).parse(sheetname=sheetname, **kwds)

133
134



/Users/mw4687/anaconda/lib/python3.4/site-packages/pandas/io/excel.py in __init__(self, io, **kwds)


167 self.book = xlrd.open_workbook(file_contents=data)

168 else:

--&gt; 169 self.book = xlrd.open_workbook(io)


170 elif engine == ‘xlrd’ and isinstance(io, xlrd.Book):

171 self.book = io



/Users/mw4687/anaconda/lib/python3.4/site-packages/xlrd/__init__.py in open_workbook(filename, logfile,

 verbosity, use_mmap, file_contents, encoding_override, formatting_info, on_demand, ragged_rows)

392 peek = file_contents[:peeksz]
393 else:
--&gt; 394 f = open(filename, &quot;rb&quot;)
395 peek = f.read(peeksz)
396 f.close()



FileNotFoundError: [Errno 2] No such file or directory: ‘WHO POP TB same.xls’

</pre></div>
</div>
<p>Jupyter notebooks show strings in red. If you see red characters until the end of the line, you have forgotten to type the second quote that marks the end of the string.</p>
<p>In the next section, find out how to select a column.</p>
</section>
<section id="selecting-a-column">
<h2>1.3 Selecting a column<a class="headerlink" href="#selecting-a-column" title="Permalink to this heading">#</a></h2>
<p>Now you have the data, let the analysis begin!</p>
<p><img alt="An image of free standing Roman columns standing against a blue sky" src="ou_futurelearn_learn_to_code_fig_1035.jpg" /></p>
<p><strong>Figure 3</strong></p>
<p>Let’s tackle the first part of the first question: ‘What are the total, smallest, largest and average number of deaths due to TB?’ Obtaining the total number will be done in two steps: first select the column with the TB deaths, then sum the values in that column.</p>
<p>Selecting a single column of a dataframe is done with an expression in the format: <strong><code class="docutils literal notranslate"><span class="pre">dataFrame['column</span> <span class="pre">name'].</span></code></strong></p>
<p><code class="docutils literal notranslate"><span class="pre">In</span> <span class="pre">[]:</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">data['TB</span> <span class="pre">deaths']</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">Out[]:</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
<span class="mi">0</span> <span class="mi">6900</span>
<span class="mi">1</span> <span class="mi">4400</span>
<span class="mi">2</span> <span class="mi">41000</span>
<span class="mi">3</span> <span class="mi">67</span>
<span class="mi">4</span> <span class="mi">1200</span>
<span class="mi">5</span> <span class="mi">240000</span>
<span class="mi">6</span> <span class="mi">18000</span>
<span class="mi">7</span> <span class="mi">140</span>
<span class="mi">8</span> <span class="mi">17000</span>
<span class="mi">9</span> <span class="mi">18</span>
<span class="mi">10</span> <span class="mi">25000</span>
<span class="mi">11</span> <span class="mi">990</span>
<span class="n">Name</span><span class="p">:</span> <span class="n">TB</span> <span class="n">deaths</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="n">int64</span>
</pre></div>
</div>
<p>Strings are verbatim text, which means that the column name must be written exactly as given in the dataframe, which you saw after loading the data. The slightest deviation leads to a <strong>key error</strong> , which can be seen as a kind of name error. You can try out in the Week 2 exercise notebook what happens when misspelling the column name. The error message is horribly long. In such cases, just skip to the last line of the error message to see the type of error.</p>
<p>Put this learning into practice in Exercise 6.</p>
<div class="admonition-activity-region-tags-style-activity admonition">
<p class="admonition-title">Activity<!-- #region tags=["style-activity"] --></p>
<p class="rubric">Exercise 6 selecting a column</p>
<p class="rubric">Question</p>
<p>In your Exercise notebook 1, select the population column and store it in a variable, so that you can use it in later exercises.</p>
<p>Remember that to open the notebook you’ll need to launch Anaconda and then navigate to the notebook using Jupyter. Once it’s open, run all the code.</p>
<!-- #endregion -->
</div>
<p>Next, you’ll learn about making calculations on a column.</p>
</section>
<section id="calculations-on-a-column">
<h2>1.4 Calculations on a column<a class="headerlink" href="#calculations-on-a-column" title="Permalink to this heading">#</a></h2>
<p>Having selected the column with the number of deaths per country, I’ll add them with the appropriately named sum() method to obtain the overall total deaths.</p>
<p>A <strong>method</strong> is a function that can only be called in a certain context. In this course, the context will mostly be a dataframe or a column. A <strong>method call</strong> looks like a function call, but adds the context in which to call the method: <code class="docutils literal notranslate"><span class="pre">context.methodName(argument1,</span> <span class="pre">argument2,</span> <span class="pre">...)</span></code> . In other words, a dataframe method can only be called on dataframes, a column method only on columns. Because methods are functions, a method call returns a value and is therefore an expression.</p>
<p>If all that sounded too abstract, here’s how to call the <code class="docutils literal notranslate"><span class="pre">sum()</span></code> method on the TB deaths column. Note that <code class="docutils literal notranslate"><span class="pre">sum()</span></code> doesn’t need any arguments because all the values are in the column.</p>
<p><code class="docutils literal notranslate"><span class="pre">In</span> <span class="pre">[]:</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
<span class="n">tbColumn</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;TB deaths&#39;</span><span class="p">]</span>
<span class="n">tbColumn</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Out[]:</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">354715</span></code></p>
<p>The estimated total number of deaths due to TB in 2013 in the BRICS and Portuguese-speaking countries was over 350 thousand. An impressive number, for the wrong reasons.</p>
<p>Calculating the minimum and maximum number of deaths is done in a similar way.</p>
<p><code class="docutils literal notranslate"><span class="pre">In</span> <span class="pre">[]:</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tbColumn.min()</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">Out[]:</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">18</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">In</span> <span class="pre">[]:</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tbColumn.max()</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">Out[]:</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">240000</span></code></p>
<p>Like <code class="docutils literal notranslate"><span class="pre">sum()</span></code> , the column methods <code class="docutils literal notranslate"><span class="pre">min()</span></code> and <code class="docutils literal notranslate"><span class="pre">max()</span></code> don’t need arguments, whereas the Python functions <code class="docutils literal notranslate"><span class="pre">min()</span></code> and <code class="docutils literal notranslate"><span class="pre">max()</span></code> did need them, because there was no context (column) providing the values.</p>
<p>The average number is computed as before, dividing the total by the number of countries.</p>
<p><code class="docutils literal notranslate"><span class="pre">In</span> <span class="pre">[]:</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tbColumn.sum()</span> <span class="pre">/</span> <span class="pre">12</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">Out[]:</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">29559.583333333332</span></code></p>
<p>This kind of average is called the <strong>mean</strong> and there’s a method for that.</p>
<p><code class="docutils literal notranslate"><span class="pre">In</span> <span class="pre">[]:</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tbColumn.mean()</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">Out[]:</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">29559.583333333332</span></code></p>
<p>Another kind of average measure is the <strong>median</strong> , which is the number in the middle, i.e. half of the values are above the median and half below it.</p>
<p><code class="docutils literal notranslate"><span class="pre">In</span> <span class="pre">[]:</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tbColumn.median()</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">Out[]:</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">5650.0</span></code></p>
<p>The mean is five times higher than the median. While half the countries had less than 5650 deaths in 2013, some countries had far more, which pushes the mean up.</p>
<p>The median is probably closer to the intuition you have of what ‘average’ should mean (pun intended). News reports don’t always make clear what average measure is being used, and using the mean may distort reality. For example, the mean household income in a country will be influenced by very poor and very rich households, whereas the median income doesn’t take into account how poor or rich the extremes are: it will always be half the households below and half above the median.</p>
<p>Put this learning into practice in Exercise 7.</p>
<div class="admonition-activity-region-tags-style-activity admonition">
<p class="admonition-title">Activity<!-- #region tags=["style-activity"] --></p>
<p class="rubric">Exercise 7 calculations on a column</p>
<p class="rubric">Question</p>
<p>Practise the use of column methods by applying them to the population column you obtained in Exercise 6 in the Exercise notebook 1. Remember to run all code before doing the exercise.</p>
<!-- #endregion -->
</div>
</section>
<section id="sorting-on-a-column">
<h2>1.5 Sorting on a column<a class="headerlink" href="#sorting-on-a-column" title="Permalink to this heading">#</a></h2>
<p>One of the research questions was: which countries have the smallest and largest number of deaths?</p>
<p>Being a small table, it is not too difficult to scan the TB deaths column and find those countries. However, such a process is prone to errors and impractical for large tables. It’s much better to sort the table by that column, and then look up the countries in the first and last rows.</p>
<p>As you’ve guessed by now, sorting a table is another single line of code.</p>
<p><code class="docutils literal notranslate"><span class="pre">In</span> <span class="pre">[]:</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">data.sort_values('TB</span> <span class="pre">deaths')</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">Out[]:</span></code></p>
<table xmlns:str="http://exslt.org/strings">
<caption></caption>
<tbody>
<tr>
<th></th>
<th>Country</th>
<th>Population (1000s)</th>
<th>TB deaths</th>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">9</td>
<td class="highlight_" rowspan="" colspan="">Sao Tome and Principe</td>
<td class="highlight_" rowspan="" colspan="">193</td>
<td class="highlight_" rowspan="" colspan="">18</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">3</td>
<td class="highlight_" rowspan="" colspan="">Equatorial Guinea</td>
<td class="highlight_" rowspan="" colspan="">757</td>
<td class="highlight_" rowspan="" colspan="">67</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">7</td>
<td class="highlight_" rowspan="" colspan="">Portugal</td>
<td class="highlight_" rowspan="" colspan="">10608</td>
<td class="highlight_" rowspan="" colspan="">140</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">11</td>
<td class="highlight_" rowspan="" colspan="">Timor-Leste</td>
<td class="highlight_" rowspan="" colspan="">1133</td>
<td class="highlight_" rowspan="" colspan="">990</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">4</td>
<td class="highlight_" rowspan="" colspan="">Guinea-Bissau</td>
<td class="highlight_" rowspan="" colspan="">1704</td>
<td class="highlight_" rowspan="" colspan="">1200</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">1</td>
<td class="highlight_" rowspan="" colspan="">Brazil</td>
<td class="highlight_" rowspan="" colspan="">200362</td>
<td class="highlight_" rowspan="" colspan="">4400</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">0</td>
<td class="highlight_" rowspan="" colspan="">Angola</td>
<td class="highlight_" rowspan="" colspan="">21472</td>
<td class="highlight_" rowspan="" colspan="">6900</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">8</td>
<td class="highlight_" rowspan="" colspan="">Russian Federation</td>
<td class="highlight_" rowspan="" colspan="">142834</td>
<td class="highlight_" rowspan="" colspan="">17000</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">6</td>
<td class="highlight_" rowspan="" colspan="">Mozambique</td>
<td class="highlight_" rowspan="" colspan="">25834</td>
<td class="highlight_" rowspan="" colspan="">18000</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">10</td>
<td class="highlight_" rowspan="" colspan="">South Africa</td>
<td class="highlight_" rowspan="" colspan="">52776</td>
<td class="highlight_" rowspan="" colspan="">25000</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">2</td>
<td class="highlight_" rowspan="" colspan="">China</td>
<td class="highlight_" rowspan="" colspan="">1393337</td>
<td class="highlight_" rowspan="" colspan="">41000</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">5</td>
<td class="highlight_" rowspan="" colspan="">India</td>
<td class="highlight_" rowspan="" colspan="">1252140</td>
<td class="highlight_" rowspan="" colspan="">240000</td>
</tr>
</tbody>
</table>
<p>The dataframe method <code class="docutils literal notranslate"><span class="pre">sort_values()</span></code> takes as argument a column name and returns a new dataframe where the rows are in ascending order of the values in that column. Note that sorting doesn’t modify the original dataframe.</p>
<p><code class="docutils literal notranslate"><span class="pre">In</span> <span class="pre">[]:</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">#</span> <span class="pre">rows</span> <span class="pre">still</span> <span class="pre">in</span> <span class="pre">original</span> <span class="pre">order</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">Out[]:</span></code></p>
<table xmlns:str="http://exslt.org/strings">
<caption></caption>
<tbody>
<tr>
<th></th>
<th>Country</th>
<th>Population (1000s)</th>
<th>TB deaths</th>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">0</td>
<td class="highlight_" rowspan="" colspan="">Angola</td>
<td class="highlight_" rowspan="" colspan="">21472</td>
<td class="highlight_" rowspan="" colspan="">6900</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">1</td>
<td class="highlight_" rowspan="" colspan="">Brazil</td>
<td class="highlight_" rowspan="" colspan="">200362</td>
<td class="highlight_" rowspan="" colspan="">4400</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">2</td>
<td class="highlight_" rowspan="" colspan="">China</td>
<td class="highlight_" rowspan="" colspan="">1393337</td>
<td class="highlight_" rowspan="" colspan="">41000</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">3</td>
<td class="highlight_" rowspan="" colspan="">Equatorial Guinea</td>
<td class="highlight_" rowspan="" colspan="">757</td>
<td class="highlight_" rowspan="" colspan="">67</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">4</td>
<td class="highlight_" rowspan="" colspan="">Guinea-Bissau</td>
<td class="highlight_" rowspan="" colspan="">1704</td>
<td class="highlight_" rowspan="" colspan="">1200</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">5</td>
<td class="highlight_" rowspan="" colspan="">India</td>
<td class="highlight_" rowspan="" colspan="">1252140</td>
<td class="highlight_" rowspan="" colspan="">240000</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">6</td>
<td class="highlight_" rowspan="" colspan="">Mozambique</td>
<td class="highlight_" rowspan="" colspan="">25834</td>
<td class="highlight_" rowspan="" colspan="">18000</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">7</td>
<td class="highlight_" rowspan="" colspan="">Portugal</td>
<td class="highlight_" rowspan="" colspan="">10608</td>
<td class="highlight_" rowspan="" colspan="">140</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">8</td>
<td class="highlight_" rowspan="" colspan="">Russian Federation</td>
<td class="highlight_" rowspan="" colspan="">142834</td>
<td class="highlight_" rowspan="" colspan="">17000</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">9</td>
<td class="highlight_" rowspan="" colspan="">Sao Tome and Principe</td>
<td class="highlight_" rowspan="" colspan="">193</td>
<td class="highlight_" rowspan="" colspan="">18</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">10</td>
<td class="highlight_" rowspan="" colspan="">South Africa</td>
<td class="highlight_" rowspan="" colspan="">52776</td>
<td class="highlight_" rowspan="" colspan="">25000</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">11</td>
<td class="highlight_" rowspan="" colspan="">Timor-Leste</td>
<td class="highlight_" rowspan="" colspan="">1133</td>
<td class="highlight_" rowspan="" colspan="">990</td>
</tr>
</tbody>
</table>
<p>It’s also possible to sort on a column that has text instead of numbers; the rows will be sorted in alphabetical order.</p>
<p><code class="docutils literal notranslate"><span class="pre">In</span> <span class="pre">[]:</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">data.sort_values('Country')</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">Out[]:</span></code></p>
<table xmlns:str="http://exslt.org/strings">
<caption></caption>
<tbody>
<tr>
<th></th>
<th>Country</th>
<th>Population (1000s)</th>
<th>TB deaths</th>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">0</td>
<td class="highlight_" rowspan="" colspan="">Angola</td>
<td class="highlight_" rowspan="" colspan="">21472</td>
<td class="highlight_" rowspan="" colspan="">6900</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">1</td>
<td class="highlight_" rowspan="" colspan="">Brazil</td>
<td class="highlight_" rowspan="" colspan="">200362</td>
<td class="highlight_" rowspan="" colspan="">4400</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">2</td>
<td class="highlight_" rowspan="" colspan="">China</td>
<td class="highlight_" rowspan="" colspan="">1393337</td>
<td class="highlight_" rowspan="" colspan="">41000</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">3</td>
<td class="highlight_" rowspan="" colspan="">Equatorial Guinea</td>
<td class="highlight_" rowspan="" colspan="">757</td>
<td class="highlight_" rowspan="" colspan="">67</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">4</td>
<td class="highlight_" rowspan="" colspan="">Guinea-Bissau</td>
<td class="highlight_" rowspan="" colspan="">1704</td>
<td class="highlight_" rowspan="" colspan="">1200</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">5</td>
<td class="highlight_" rowspan="" colspan="">India</td>
<td class="highlight_" rowspan="" colspan="">1252140</td>
<td class="highlight_" rowspan="" colspan="">240000</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">6</td>
<td class="highlight_" rowspan="" colspan="">Mozambique</td>
<td class="highlight_" rowspan="" colspan="">25834</td>
<td class="highlight_" rowspan="" colspan="">18000</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">7</td>
<td class="highlight_" rowspan="" colspan="">Portugal</td>
<td class="highlight_" rowspan="" colspan="">10608</td>
<td class="highlight_" rowspan="" colspan="">140</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">8</td>
<td class="highlight_" rowspan="" colspan="">Russian Federation</td>
<td class="highlight_" rowspan="" colspan="">142834</td>
<td class="highlight_" rowspan="" colspan="">17000</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">9</td>
<td class="highlight_" rowspan="" colspan="">Sao Tome and Principe</td>
<td class="highlight_" rowspan="" colspan="">193</td>
<td class="highlight_" rowspan="" colspan="">18</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">10</td>
<td class="highlight_" rowspan="" colspan="">South Africa</td>
<td class="highlight_" rowspan="" colspan="">52776</td>
<td class="highlight_" rowspan="" colspan="">25000</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">11</td>
<td class="highlight_" rowspan="" colspan="">Timor-Leste</td>
<td class="highlight_" rowspan="" colspan="">1133</td>
<td class="highlight_" rowspan="" colspan="">990</td>
</tr>
</tbody>
</table>
<div class="admonition-activity-region-tags-style-activity admonition">
<p class="admonition-title">Activity<!-- #region tags=["style-activity"] --></p>
<p class="rubric">Exercise 8 sorting on a column</p>
<p class="rubric">Question</p>
<p>Use the Exercise notebook 1 to sort the table by population so that you can quickly see which are the least and the most populous countries. Remember to run all code before doing the exercise.</p>
<!-- #endregion -->
</div>
<p>In the next section you’ll learn about calculations over columns.</p>
</section>
<section id="calculations-over-columns">
<h2>1.6 Calculations over columns<a class="headerlink" href="#calculations-over-columns" title="Permalink to this heading">#</a></h2>
<p>The last remaining task is to calculate the death rate of each country.</p>
<p>You may recall that with the simple approach I’d have to write:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>

<span class="n">rateAngola</span> <span class="o">=</span> <span class="n">deathsInAngola</span> <span class="o">*</span> <span class="mi">100</span> <span class="o">/</span> <span class="n">populationOfAngola</span>


<span class="n">rateBrazil</span> <span class="o">=</span> <span class="n">deathsInBrazil</span> <span class="o">*</span> <span class="mi">100</span> <span class="o">/</span> <span class="n">populationOfBrazil</span>

</pre></div>
</div>
<p>and so on, and so on. If you’ve used spreadsheets, it’s the same process: create the formula for the first row and then copy it down for all the rows. This is laborious and error-prone, e.g. if rows are added later on. Given that data is organised by columns, wouldn’t it be nice to simply write the following?</p>
<p><code class="docutils literal notranslate"><span class="pre">rateColumn</span> <span class="pre">=</span> <span class="pre">deathsColumn</span> <span class="pre">*</span> <span class="pre">100</span> <span class="pre">/</span> <span class="pre">populationColumn</span></code></p>
<p>Say no more: your wish is pandas’s command.</p>
<p><code class="docutils literal notranslate"><span class="pre">In</span> <span class="pre">[]:</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
<span class="n">deathsColumn</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;TB deaths&#39;</span><span class="p">]</span>
<span class="n">populationColumn</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;Population (1000s)&#39;</span><span class="p">]</span>
<span class="n">rateColumn</span> <span class="o">=</span> <span class="n">deathsColumn</span> <span class="o">*</span> <span class="mi">100</span> <span class="o">/</span> <span class="n">populationColumn</span>
<span class="n">rateColumn</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Out[]:</span></code></p>
<p>0 32.134873</p>
<p>1 2.196025</p>
<p>2 2.942576</p>
<p>3 8.850727</p>
<p>4 70.422535</p>
<p>5 19.167186</p>
<p>6 69.675621</p>
<p>7 1.319759</p>
<p>8 11.901928</p>
<p>9 9.326425</p>
<p>10 47.370017</p>
<p>11 87.378641</p>
<p>dtype: float64</p>
<p>Tadaaa! With pandas, the arithmetic operators become much smarter. When adding, subtracting, multiplying or dividing columns, the computer understands that the operation is to be done row by row and creates a new column.</p>
<p>All well and nice, but how to put that new column into the dataframe, in order to have everything in a single table? In an assignment <code class="docutils literal notranslate"><span class="pre">variable</span> <span class="pre">=</span> <span class="pre">expression</span></code> , if the variable hasn’t been mentioned before, the computer creates the variable and stores in it the expression’s value. Likewise, if I assign to a column that doesn’t exist in the dataframe, the computer will create it.</p>
<p><code class="docutils literal notranslate"><span class="pre">In</span> <span class="pre">[]:</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;TB deaths (per 100,000)&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rateColumn</span>
<span class="n">data</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Out[]:</span></code></p>
<table xmlns:str="http://exslt.org/strings">
<caption></caption>
<tbody>
<tr>
<th></th>
<th>Country</th>
<th>Population (1000s)</th>
<th>TB deaths</th>
<th>TB deaths (per 100,000)</th>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">0</td>
<td class="highlight_" rowspan="" colspan="">Angola</td>
<td class="highlight_" rowspan="" colspan="">21472</td>
<td class="highlight_" rowspan="" colspan="">6900</td>
<td class="highlight_" rowspan="" colspan="">32.134873</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">1</td>
<td class="highlight_" rowspan="" colspan="">Brazil</td>
<td class="highlight_" rowspan="" colspan="">200362</td>
<td class="highlight_" rowspan="" colspan="">4400</td>
<td class="highlight_" rowspan="" colspan="">2.196025</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">2</td>
<td class="highlight_" rowspan="" colspan="">China</td>
<td class="highlight_" rowspan="" colspan="">1393337</td>
<td class="highlight_" rowspan="" colspan="">41000</td>
<td class="highlight_" rowspan="" colspan="">2.942576</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">3</td>
<td class="highlight_" rowspan="" colspan="">Equatorial Guinea</td>
<td class="highlight_" rowspan="" colspan="">757</td>
<td class="highlight_" rowspan="" colspan="">67</td>
<td class="highlight_" rowspan="" colspan="">8.850727</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">4</td>
<td class="highlight_" rowspan="" colspan="">Guinea-Bissau</td>
<td class="highlight_" rowspan="" colspan="">1704</td>
<td class="highlight_" rowspan="" colspan="">1200</td>
<td class="highlight_" rowspan="" colspan="">70.422535</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">5</td>
<td class="highlight_" rowspan="" colspan="">India</td>
<td class="highlight_" rowspan="" colspan="">1252140</td>
<td class="highlight_" rowspan="" colspan="">240000</td>
<td class="highlight_" rowspan="" colspan="">19.167186</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">6</td>
<td class="highlight_" rowspan="" colspan="">Mozambique</td>
<td class="highlight_" rowspan="" colspan="">25834</td>
<td class="highlight_" rowspan="" colspan="">18000</td>
<td class="highlight_" rowspan="" colspan="">69.675621</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">7</td>
<td class="highlight_" rowspan="" colspan="">Portugal</td>
<td class="highlight_" rowspan="" colspan="">10608</td>
<td class="highlight_" rowspan="" colspan="">140</td>
<td class="highlight_" rowspan="" colspan="">1.319759</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">8</td>
<td class="highlight_" rowspan="" colspan="">Russian Federation</td>
<td class="highlight_" rowspan="" colspan="">142834</td>
<td class="highlight_" rowspan="" colspan="">17000</td>
<td class="highlight_" rowspan="" colspan="">11.901928</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">9</td>
<td class="highlight_" rowspan="" colspan="">Sao Tome and Principe</td>
<td class="highlight_" rowspan="" colspan="">193</td>
<td class="highlight_" rowspan="" colspan="">18</td>
<td class="highlight_" rowspan="" colspan="">9.326425</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">10</td>
<td class="highlight_" rowspan="" colspan="">South Africa</td>
<td class="highlight_" rowspan="" colspan="">52776</td>
<td class="highlight_" rowspan="" colspan="">25000</td>
<td class="highlight_" rowspan="" colspan="">47.370017</td>
</tr>
<tr>
<td class="highlight_" rowspan="" colspan="">11</td>
<td class="highlight_" rowspan="" colspan="">Timor-Leste</td>
<td class="highlight_" rowspan="" colspan="">1133</td>
<td class="highlight_" rowspan="" colspan="">990</td>
<td class="highlight_" rowspan="" colspan="">87.378641</td>
</tr>
</tbody>
</table>
<p>That’s it! I’ve written all the code needed to answer the questions I had. Next I’ll write up the analysis into a succinct and stand-alone notebook that can be shared with friends, family and colleagues or the whole world. You’ll find that in the next section.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "ouseful-demos/learn-to-code-jupyterlite",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="md_out_00_03.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">3 Summary</p>
      </div>
    </a>
    <a class="right-next"
       href="md_out_01_02.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">2 Writing up the analysis</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#this-weeks-data">1.1 This week’s data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#loading-the-data">1.2 Loading the data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#selecting-a-column">1.3 Selecting a column</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculations-on-a-column">1.4 Calculations on a column</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sorting-on-a-column">1.5 Sorting on a column</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculations-over-columns">1.6 Calculations over columns</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By OpenLearn
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=365ca57ee442770a23c6"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=365ca57ee442770a23c6"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>